"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}!function(e){e.fn.jQueryInputTags=function(t){var a=this,n={maxTotalSize:255,maxTagSize:255,minTagSize:1,chars:/[:,]/,keycode:/(^9$|^13$)/,separator:",",sensitive:!1,clearSpaces:!0},t=e.extend({},n,t),i={init:function(){i.populate(a),i.handlers()},addTag:function(a,n){t.clearSpaces&&(n=n.replace(/^\s+/,"").replace(/\s+/g," ")),e(a).find('input[type="text"]').val(""),i.updateTagList(a,n),e(a).find(".tag").remove(),i.getTagList(a).length&&i.getTagList(a).forEach(function(t,n){e(a).append('<div class="tag" data-tag-value="'+t+'">'+t+'<div class="delete" data-tag-value="'+t+'">+</div></div>')})},deleteTag:function(t,a){if(e(t).find('input[type="text"]').hasClass("duplicated"))e(t).find('input[type="text"]').removeClass("duplicated");else{var n=i.getTagList(t);n.length&&("last"===a?n.pop():n.splice(a,1),e(t).find('input[type="hidden"]').val(n=n.toString()),e(t).find(".tag").remove(),i.populate(t))}},updateTagList:function(a,n){var i=new Set(e(a).find('input[type="hidden"]').val().split(t.separator));if(t.sensitive===!1)var r=new Set(e(a).find('input[type="hidden"]').val().toLowerCase().split(t.separator));i.has("")&&i["delete"](""),n.split(t.chars).forEach(function(e,a){e.length>=t.minTagSize&&e.length<=t.maxTagSize&&(t.sensitive===!1&&r.has(e.toLowerCase())||i.has(e)||i.add(e),[].concat(_toConsumableArray(i)).toString().length>=t.maxTotalSize&&i["delete"](e))}),e(a).find('input[type="hidden"]').val([].concat(_toConsumableArray(i)).toString())},getTagList:function(a){var n=e(a).find('input[type="hidden"]').val().length?e(a).find('input[type="hidden"]').val().split(""+t.separator):"";return""===n[0]&&n.splice(0,1),n},populate:function(t){e(t).each(function(t,a){e(a).find('input[type="hidden"]').val().length&&i.addTag(a,i.getTagList(a).toString())})},handlers:function(){e(a).on("keyup keydown",function(e){var a=e.target.value;(t.keycode.test(e.keyCode)||t.chars.test(a))&&a.length>=t.minTagSize&&i.addTag(e.currentTarget,a)}),e(a).on("keyup",function(e){var t=e.target.value;8===e.keyCode&&0===t.length&&i.deleteTag(e.currentTarget,"last")}),e(a).on("click",function(t){e(t.target).hasClass("delete")&&i.deleteTag(t.currentTarget,e(t.target).parent(".tag").index()-2)})}};i.init()}}(jQuery);